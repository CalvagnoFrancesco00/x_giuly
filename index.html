<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Lettera di Lady Whistledown con Gattino</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Playfair Display', serif;
  background: linear-gradient(to bottom, #fdf6f0, #fff0f5); /* sfondo uniforme */
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  overflow:hidden;
  position: relative;
}

/* Gattino emoji */
#cat {
  font-size:5rem;
  cursor:pointer;
  display:inline-block;
  transition: all 0.3s ease;
}

#cat:hover { transform: translateY(-10px); }

/* Busta */
.envelope-container {
  perspective:1000px;
  width:90%;
  max-width:400px;
  position:relative;
  text-align:center;
}

.envelope {
  width:100%;
  margin-top:20px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 1s;
}

.envelope .front, .envelope .back {
  width:100%;
  padding:50px 20px;
  border-radius:15px;
  background: linear-gradient(to bottom, #fdf6f0, #fff0f5); /* uniforme con il body */
  box-shadow:0 5px 20px rgba(0,0,0,0.2);
  position:absolute;
  top:0;
  left:0;
  backface-visibility:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

.envelope .front h1 {
  font-family: 'Great Vibes', cursive;
  font-size:2rem;
  color:#d6336c;
  text-align:center;
}

.envelope .back {
  transform: rotateX(180deg);
  flex-direction:column;
  padding:30px 20px;
  color:#4a2c2a;
}

.letter-text {
  font-size:1.1rem;
  line-height:1.6;
  min-height:120px;
  text-align:center;
  margin-top:20px;
  word-wrap:break-word;
}

.cursor {
  display:inline-block;
  width:2px;
  background-color:#d6336c;
  margin-left:2px;
  animation:blink 1s infinite;
  vertical-align:bottom;
}

@keyframes blink {
  0%,50%,100%{opacity:1;}
  25%,75%{opacity:0;}
}

/* Immagine gattino laterale */
#catImage {
  position: absolute;
  top:50px;
  left:0px;
  cursor:pointer;
  transition: all 0.5s ease; /* animazione morbida */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.flip { transform: scaleX(-1); }

/* Responsive per mobile */
@media (max-width:480px){
  .envelope .front h1 { font-size:1.5rem; }
  .letter-text { font-size:1rem; text-align:center; }
  #cat { font-size:4rem; }
  #catImage { width:80px; height:auto; } /* gattino piÃ¹ piccolo */
}
</style>
</head>
<body>

<!-- Gattino emoji cliccabile -->
<div id="cat">ðŸ˜º</div>

<!-- Busta -->
<div class="envelope-container">
  <div class="envelope" id="envelope">
    <div class="front">
      <h1>La tua lettera ti aspetta</h1>
    </div>
    <div class="back">
      <h1>Da Lady Whistledown</h1>
      <p class="letter-text" id="letterText"></p>
    </div>
  </div>
</div>

<!-- Immagine gattino laterale -->
<img id="catImage" src="//mofusand-mofumofu-market.jp/cdn/shop/files/hyoko_100x.png?v=9699436684720925096" 
     width="134" height="175" loading="eager" alt="">

<script>
const text = `Cari lettori,
    
In questa giornata di San Valentino, l'amore aleggia tra i saloni e le corti come un profumo delicato. 
Che la vostra vita sia colma di eleganza, romance e piccoli scandali del cuore.

Con affetto,
Lady Whistledown ðŸ’Œ`;

const envelope = document.getElementById('envelope');
const letterElement = document.getElementById('letterText');
const cat = document.getElementById('cat');
const catImage = document.getElementById('catImage');

// Animazione gattino e apertura busta
cat.addEventListener('click', () => {
  cat.style.transform = 'translateY(20px) rotate(-15deg)';
  
  setTimeout(() => {
    envelope.style.transform = 'rotateX(180deg)';

    // Scrittura della lettera
    letterElement.textContent = '';
    let i = 0;
    function type() {
      if(i<text.length){
        if(text[i]==='\n'){ letterElement.innerHTML+='<br>'; }
        else{ letterElement.innerHTML+=text[i]; }
        i++;
        setTimeout(type,50);
      }
    }
    type();
  }, 500);
});

// Spostamento del gattino solo ai lati e specchiamento
catImage.addEventListener('click', () => {
  const windowWidth = window.innerWidth;
  const imgWidth = catImage.offsetWidth;

  // Lato casuale
  const goRight = Math.random() < 0.5;
  
  if(goRight){
    catImage.style.left = (windowWidth - imgWidth - 10) + 'px';
    catImage.classList.add('flip'); // specchia
  } else {
    catImage.style.left = '10px';
    catImage.classList.remove('flip'); // normale
  }

  // Altezza casuale entro finestra
  const windowHeight = window.innerHeight;
  const imgHeight = catImage.offsetHeight;
  const randomY = Math.floor(Math.random() * (windowHeight - imgHeight));
  catImage.style.top = randomY + 'px';
});
</script>

</body>
</html>
